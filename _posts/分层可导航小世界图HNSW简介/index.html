

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head><!-- hexo injector head_begin start --><meta name="msvalidate.01" content="DF9F232801BA9D0CABB002E4774A3228" />
<meta name="google-site-verification" content="vOm5Zs9tuUlEh-wVBlpvs_spnOou-q2CoTiFQ1ZV1h4" />
<script defer src="https://cloud.umami.is/script.js" data-website-id="0369421f-4354-4d7b-99c7-ae077c591b4f"></script>
<!-- hexo injector head_begin end -->
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar/avatar2.webp">
  <link rel="icon" href="/img/avatar/avatar2.webp">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="youyeyejie">
  <meta name="keywords" content="yyyj,YYYJ,youyeyejie,有野野芥">
  
    <meta name="description" content="HNSW（Hierarchical Navigable Small World graph）是一种高效的近似最近邻搜索算法，结合了概率跳表和可导航小世界图的优点，通过分层结构实现对数级复杂度的近邻搜索，广泛应用于大规模数据处理和机器学习领域。">
<meta property="og:type" content="article">
<meta property="og:title" content="分层可导航小世界图HNSW简介">
<meta property="og:url" content="https://youyeyejie.github.io/_posts/%E5%88%86%E5%B1%82%E5%8F%AF%E5%AF%BC%E8%88%AA%E5%B0%8F%E4%B8%96%E7%95%8C%E5%9B%BEHNSW%E7%AE%80%E4%BB%8B/index.html">
<meta property="og:site_name" content="有野野芥的博客">
<meta property="og:description" content="HNSW（Hierarchical Navigable Small World graph）是一种高效的近似最近邻搜索算法，结合了概率跳表和可导航小世界图的优点，通过分层结构实现对数级复杂度的近邻搜索，广泛应用于大规模数据处理和机器学习领域。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://notes.sjtu.edu.cn/uploads/upload_52554988be29ed3f5a8521eaf3017f58.png">
<meta property="article:published_time" content="2025-11-08T03:39:11.000Z">
<meta property="article:modified_time" content="2025-11-20T06:53:50.592Z">
<meta property="article:author" content="youyeyejie">
<meta property="article:tag" content="HNSW">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://notes.sjtu.edu.cn/uploads/upload_52554988be29ed3f5a8521eaf3017f58.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>分层可导航小世界图HNSW简介 - 有野野芥的博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">
<link rel="stylesheet" href="//lib.baomitu.com/font-awesome/6.1.2/css/all.min.css">


<link  rel="stylesheet" href="/css/main.css" />




  
<link rel="stylesheet" href="/css/Background.css">
<link rel="stylesheet" href="/css/CodeBlock.css">
<link rel="stylesheet" href="/css/CodeInLine.css">
<link rel="stylesheet" href="/css/Crypto.css">
<link rel="stylesheet" href="/css/Gallery.css">
<link rel="stylesheet" href="/css/IndexImgHover.css">
<link rel="stylesheet" href="/css/LinkCard.css">
<link rel="stylesheet" href="/css/ScrollAnimation.css">
<link rel="stylesheet" href="/css/ScrollBar.css">
<link rel="stylesheet" href="/css/Sidebar.css">
<link rel="stylesheet" href="/css/StrongInDark.css">
<link rel="stylesheet" href="/css/TitleGradient.css">
<link rel="stylesheet" href="/css/Tooltip.css">
<link rel="stylesheet" href="/css/UnifyImgWidth.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"youyeyejie.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":false,"default":"TEXT"},"copy_btn":false,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading/loading3.gif","onlypost":true,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css">
<style>:root{--hl-color:#abb2bf;--hl-bg:#282c34;--hltools-bg:#21252b;--hltools-color:#bbbbbc;--hlnumber-bg:#282c34;--hlnumber-color:#495162;--hlscrollbar-bg:#373c47;--hlexpand-bg:linear-gradient(180deg,rgba(40,44,52,0.1),rgba(40,44,52,0.9))}</style>
    <style>
    .code-expand-btn:not(.expand-done) ~ div.codeblock,
    .code-expand-btn:not(.expand-done) ~ * div.codeblock {
      overflow: hidden;
      height: 360px;
    }
    </style>
  <!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body><!-- hexo injector body_begin start --><div id="web_bg"></div><div id="tooltip" class="tooltip"></div><!-- hexo injector body_begin end -->
  <div id="loader-container"> 
    <div id="loader" class="loader"></div>
    <div class="loader-inner">
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
        <div class="loader-line-wrap">
            <div class="loader-line"></div>
        </div>
    </div>
</div>

<script src="/js/RainbowLoading.js" type="text/javascript"></script>
<link href="/css/RainbowLoading.css" type="text/css" rel="stylesheet"/><div id="rightmenu-wrapper">
  <ul class="list-v rightmenu" id="rightmenu-content">
	    <li class="navigation menuNavigation-Content">
            <a class="nav icon-only fix-cursor-default" aria-label="back" onclick="history.back()"><i class="fa-solid fa-chevron-left"></i></a>
            <a class="nav icon-only fix-cursor-default" aria-label="forward" onclick="history.forward()"><i class="fa-solid fa-chevron-right"></i></a>
            <a class="nav icon-only fix-cursor-default" aria-label="reload" onclick="window.location.reload()"><i class="fa-solid fa-rotate-right"></i></a>
            <a class="nav icon-only fix-cursor-default" aria-label="top" onclick="scrollToTopSmooth();"><i class="fa-solid fa-chevron-up"></i></a>
            <a class="nav icon-only fix-cursor-default" aria-label="bottom" onclick="scrollToBottomSmooth();"><i class="fa-solid fa-chevron-down"></i></a>
	    </li>

        <hr class="menuLoad-Content" style="display: block;" id="top-line">

        <li class="menuLoad-Content" style="display: block;">
            <a class="vlts-menu fix-cursor-default" target="_self" onclick="copyLink();">
                <span>
                    <i class="fa-solid fa-link"></i>
                    复制链接
                </span>
            </a>
        </li>
        <li class="menuLoad-Content" style="display: block;" id="copy-selected-text" hidden>
            <a class="vlts-menu fix-cursor-default" target="_self" onclick="copySelectedText();">
                <span>
                    <i class="fa-solid fa-copy"></i>
                    &nbsp;复制选中
                </span>
            </a>
        </li>
        <li class="menuLoad-Content" style="display: block;" id="search-selected-text-BING" hidden>
            <a class="vlts-menu fix-cursor-default" target="_blank" onclick="searchSelectedTextBing();">
                <span>
                    <i class="fa-solid fa-magnifying-glass-arrow-right"></i>
                    &nbsp;必应搜索
                </span>
            </a>
        </li>
        <li class="menuLoad-Content" style="display: block;" id="go-to-link" hidden>
            <a class="vlts-menu fix-cursor-default" target="_blank">
                <span>
                    <i class="fa-solid fa-arrow-up-right-from-square" style="margin-right: 1px;"></i>
                    &nbsp;打开链接
                </span>
            </a>
        </li>
        <li class="menuLoad-Content" style="display: block;" id="download-image" hidden>
            <a class="vlts-menu fix-cursor-default" target="_self" onclick="downloadImage();">
                <span>
                    <i class="fa-solid fa-image"></i>
                    &nbsp;下载图片
                </span>
            </a>
        </li>
        <li class="menuLoad-Content" style="display: block;" id="copy-image-link" hidden>
            <a class="vlts-menu fix-cursor-default" target="_self" onclick="copyImageLink();">
                <span>
                    <i class="fa-solid fa-link"></i>
                    复制图片链接
                </span>
            </a>
        </li>

		<hr class="menuLoad-Content" style="display: block;">

        <li class="menuLoad-Content" style="display: block;">
		    <a class="vlts-menu fix-cursor-default" target="_self" onclick="RandomGo()">
		        <span>
			        <i class="fa-solid fa-paper-plane"></i>
                    &nbsp;随便看看
		        </span>
		    </a>
	    </li>
	    <li class="menuLoad-Content" style="display: block;">
		    <a class="vlts-menu fix-cursor-default" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
		        <span>
			        <i class="fa-solid fa-magnifying-glass"></i>
                    &nbsp;站内搜索
		        </span>
		    </a>
	    </li>
        <li class="menuLoad-Content" style="display: block;">
		    <a class="vlts-menu fix-cursor-default" target="_self" href="/categories/">
		        <span>
			        <i class="iconfont icon-category-fill"></i>
                    &nbsp;博客分类
		        </span>
		    </a>
	    </li>
        <li class="menuLoad-Content" style="display: block;">
		    <a class="vlts-menu fix-cursor-default" target="_self" href="/tags/">
		        <span>
			        <i class="fa-solid fa-tags"></i>
                    &nbsp;文章标签
		        </span>
		    </a>
	    </li>
        
	    <hr class="menuLoad-Content" style="display: block;">

        <li class="menuLoad-Content" style="display: block;">
            <a class="vlts-menu fix-cursor-default" id="toggle-color-mode" target="_self" onclick="toggleColorMode();">
                <span>
                    <i id="toggle-color-mode-icon" class="fa-solid fa-circle-half-stroke"></i>
                    &nbsp;切换昼夜
                </span>
            </a>
        </li>
        <li class="menuLoad-Content" style="display: block;">
            <a class="vlts-menu fix-cursor-default" id="random-change-background" target="_self" onclick="randomChangeBackground();">
                <span style="margin-left: 1px;">
                    <i id="random-change-background-icon" class="fa-solid fa-image"></i>
                    &nbsp;切换背景
                </span>
            </a>
        </li>
        <li class="menuLoad-Content" style="display: block;">
            <a class="vlts-menu fix-cursor-default" id="toggle-background-mode" target="_self" onclick="toggleBackgroundMode();">
                <span>
                    <i id="toggle-background-mode-icon" class="fa-solid fa-toggle-on" style="margin-right: -1px;"></i>
                    &nbsp;全屏背景
                </span>
            </a>
        </li>
        <li class="menuLoad-Content" style="display: block;">
            <a class="vlts-menu fix-cursor-default" id="toggle-tab-display" target="_self" onclick="toggleTabDisplay();">
                <span>
                    <i id="toggle-tab-display-icon" class="fa-solid fa-toggle-on" style="margin-right: -1px;"></i>
                    &nbsp;自定义标签
                </span>
            </a>
        </li>
    </ul>
</div>


<script src="/js/RightMenu.js" type="text/javascript"></script>
<link href="/css/RightMenu.css" type="text/css" rel="stylesheet"/>

  <header>
    

<div class="header-inner" style="height: 100vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <!-- <strong>YYYJ&#39;s Blog</strong> -->
       <strong class="navbar-title">YYYJ&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://www.travellings.cn/go-by-clouds.html" target="_self">
                <i class="fas fa-train-subway"></i>
                <span>开往</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fa-solid fa-folder-open"></i>
                <span>更多</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/archives/" target="_self">
                    <i class="iconfont icon-archive-fill"></i>
                    <span>归档</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/tags/" target="_self">
                    <i class="fa-solid fa-tags"></i>
                    <span>标签</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/links/" target="_self">
                    <i class="iconfont icon-link-fill"></i>
                    <span>友链</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/DayDream-Gallery/" target="_self">
                    <i class="fas fa-images"></i>
                    <span>图集</span>
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/banner/random.webp') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="分层可导航小世界图HNSW简介"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        youyeyejie
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-11-08 11:39" pubdate>
          2025年11月8日 中午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          2.7k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          23 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        

      
    
  </div>


        
      </div>

      
        <div class="scroll-down-bar">
          <i class="iconfont icon-arrowdown"></i>
        </div>
      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">分层可导航小世界图HNSW简介</h1>
            
            
              <div class="markdown-body">
                
                <blockquote>
<p>本文是博主在 NIS3351 数据库原理及安全课程上的分享，主题是 LLM
时代的向量数据库。博主负责其中向量数据库索引算法——HNSW
部分的讲解，并基于课程准备的讲义整理学习笔记，发布于此存档，也供大家参考交流。</p>
</blockquote>
<h1 id="两个基础">两个基础</h1>
<h2 id="probability-skip-list概率跳表">Probability Skip
List（概率跳表）</h2>
<ul>
<li>改进版的链表数据结构，用于提高查找效率</li>
</ul>
<p><img src="https://notes.sjtu.edu.cn/uploads/upload_5073d3291a193970a72b7d69696a64dd.png" srcset="/img/loading/loading3.gif" lazyload></p>
<ul>
<li>结构特点：它通过<strong>引入多个层级来加速查找过程</strong>。最顶层的索引连接跨度更大的节点，可以快速跳跃，减少搜索路径长度；随着层级下降，索引的跨度逐渐变短，提供更精确的访问路径；最底层是完整的原始链表，包含所有元素。</li>
<li>插入和查找过程：插入过程是概率性的，先确定该元素首次出现在哪一层，每一层的元素出现在更高层的概率是固定的。查找时从最上层开始，每次选择下一个节点，直到遇到比目标值大的节点，然后回退到上一个节点，并进入下一层继续搜索，直到到达最底层找到目标元素。这种设计可以将查找时间复杂度从普通链表的
<span class="math inline">\(O(n)\)</span> 降低到 <span class="math inline">\(O(\log
n)\)</span>，代价是增加了一些存储开销。</li>
</ul>
<h2 id="navigable-small-world-graphs可导航小世界图">Navigable Small
World Graphs（可导航小世界图）</h2>
<ul>
<li>用于构建高效搜索结构的图模型，常用于快速近似最近邻搜索任务。</li>
</ul>
<p><img src="https://notes.sjtu.edu.cn/uploads/upload_d6195fb686a6d4ba9b70d9228601454b.png" srcset="/img/loading/loading3.gif" lazyload></p>
<ul>
<li>结构特点：这种图结合了小世界图的短路径和高聚集性特性，图中节点之间通常有较高的连接度，邻居节点之间往往彼此相连，形成聚集或团簇，同时任意两个节点之间的平均路径长度较短。此外，图中还包含长距离连接，这些连接对于维持小世界特性至关重要，能使在大规模数据中可以快速查找与查询点接近的节点。</li>
<li>搜索过程：可导航小世界图通常通过<strong>启发式搜索算法</strong>进行搜索，从一个初始节点开始，根据距离向与目标节点最近的节点跳转，从而逐渐逼近目标。这种搜索方式效率较高，避免了穷举搜索的时间开销。</li>
<li><strong>贪婪</strong></li>
<li>痛点：传统近邻图（如 k-NN 图、NSW）是
“单层结构”，搜索时需从某个起点开始，通过
“贪心遍历”找目标。但数据量增大时，遍历步数会呈 “多项式对数级”
增长，尤其在低维或聚类数据中，容易陷入
“局部最小值”（比如在聚类边界停住，找不到其他聚类的近邻）。</li>
</ul>
<h1 id="hierarchical-navigable-small-world分层可导航小世界图">Hierarchical
Navigable Small World（分层可导航小世界图）</h1>
<ul>
<li>顾名思义：HNSW 是在 NSW
基础上引入了分层结构的改进版本。是概率跳表和可导航小世界图的结合。</li>
</ul>
<p><img src="https://notes.sjtu.edu.cn/uploads/upload_52554988be29ed3f5a8521eaf3017f58.png" srcset="/img/loading/loading3.gif" lazyload></p>
<ul>
<li>可类比地图导航：从 “全国地图”（顶层）先定位到
“省地图”（中层），再缩小到 “市地图”（底层），每层只关注对应尺度的
“关键路线”（长链接 / 短链接），最终快速找到目标。</li>
<li><strong>核心思想</strong>：用 “指数衰减概率” 构建
“多层近邻图”，从顶层 “粗定位” 到低层 “精搜索”，通过 “启发式邻居选择”
保证全局连通性，最终用 “对数级复杂度” 实现高效的近似近邻搜索。</li>
</ul>
<h2 id="核心组件">核心组件</h2>
<h3 id="分层图结构多层近邻图-如何定义">分层图结构：“多层近邻图”
如何定义？</h3>
<ul>
<li>HNSW 的整体结构是多层近邻图的集合，每层对应一个 “数据子集” 和
“链接尺度”：</li>
<li>层数编号：从 “顶层”（比如 <span class="math inline">\(L\)</span>
层）到 “底层”（<span class="math inline">\(0\)</span>
层），底层包含所有数据元素，越往上的数据越少（与概率跳表类似）。</li>
<li>元素的 “层数分配”：每个元素会被随机分配一个 “最大层数”（比如元素 A
的最大层数是 3，意味着它会出现在 0-3 层，不会出现在 4 层及以上）。
<ul>
<li>分配规则是 “指数衰减概率”：层数越高，元素出现的概率越低</li>
</ul></li>
<li>层内链接：每层内的元素通过 “近邻链接” 连接，但链接的 “特征距离”
不同：
<ul>
<li>顶层链接是 “长距离链接”（连接不同聚类的关键节点）</li>
<li>底层链接是 “短距离链接”（连接同一聚类内的近邻）</li>
</ul></li>
</ul>
<h3 id="搜索入口点enter-point从哪里开始搜索">搜索入口点（Enter
Point）：从哪里开始搜索？</h3>
<ul>
<li>初始入口点：首次<strong>构建</strong>图时，第一个插入的元素就是顶层入口点；后续若插入
“最大层数更高” 的元素（比如现有顶层是 3 层，插入一个最大层数为 4
的元素），则更新入口点为这个新元素。</li>
<li>作用：搜索时必须从 “顶层入口点” 开始 —— 因为顶层的长链接能快速
“跨越” 大范围数据，避免从底层开始的 “盲目遍历”。</li>
</ul>
<h3 id="邻居选择规则如何避免-局部最小值">邻居选择规则：如何避免
“局部最小值”？</h3>
<ul>
<li>传统近邻图只选 “离自己最近的 <span class="math inline">\(k\)</span>
个邻居”，容易导致
“聚类隔离”（比如两个聚类的元素间没有链接，搜索时无法跨聚类）。HNSW
用两种邻居选择方式，核心是启发式规则：
<ul>
<li>简单规则（Algorithm 3）：直接选离插入元素<strong>最近</strong>的
<span class="math inline">\(M\)</span> 个候选者（<span class="math inline">\(M\)</span>
是每层最大连接数），适合数据分布均匀的场景。</li>
<li>启发式规则（Algorithm 4）：不仅看 “候选者与插入元素的距离”，还看
“候选者与已选邻居的距离”—— <strong>只有当候选者比 “已选邻居”
更接近插入元素时，才将其选为邻居</strong>。这种规则能强制建立
“跨聚类链接”，比如在两个孤立聚类的边界插入元素时，会主动连接另一个聚类的元素，保证全局连通性。</li>
</ul>
<img src="https://notes.sjtu.edu.cn/uploads/upload_61e80b805192f34216152eff65c1659a.png" srcset="/img/loading/loading3.gif" lazyload></li>
</ul>
<h2 id="核心流程">核心流程</h2>
<h3 id="图构建插入元素如何把元素-放进-分层图">图构建（插入元素）：如何把元素
“放进” 分层图？</h3>
<p>构建流程的目标是 “增量插入元素，同时维护分层图结构”</p>
<ul>
<li>输入：空的 HNSW 图、新元素 <span class="math inline">\(q\)</span>、参数（<span class="math inline">\(M\)</span>、<span class="math inline">\(M_{max}\)</span>、<span class="math inline">\(efConstruction\)</span> 等）</li>
<li>输出：更新后的 HNSW 图</li>
</ul>
<ol type="1">
<li>步骤 1：对新插入的元素 <span class="math inline">\(q\)</span>，按
“指数衰减概率” 随机生成它的最大层数 <span class="math inline">\(l\)</span> —— 决定它会出现在 <span class="math inline">\(0\)</span> 到 <span class="math inline">\(l\)</span> 层。</li>
<li>步骤 2：从顶层开始，“向下搜索” 候选邻居
<ul>
<li>搜索的目的是 “在每层找到 <span class="math inline">\(q\)</span>
的近邻”，分两个阶段：</li>
<li>阶段 A：上层搜索（从顶层 <span class="math inline">\(L\)</span> 到
<span class="math inline">\(l+1\)</span> 层）—— 用 “小候选列表” 快速定位
<ul>
<li>从入口点 <span class="math inline">\(ep\)</span> 开始，用与 NSW
类似的方法遍历找到离 <span class="math inline">\(q\)</span>
最近的元素。每层搜索后，将 <span class="math inline">\(W\)</span> 中离
<span class="math inline">\(q\)</span> 最近的元素作为 “下一层的入口点
<span class="math inline">\(ep\)</span>”，继续向下搜索。</li>
<li>作用：此阶段近邻列表 <span class="math inline">\(W\)</span>
的规模为1，快速缩小范围</li>
</ul></li>
<li>阶段 B：下层搜索（从 <span class="math inline">\(\min(L,l)\)</span>
层到 <span class="math inline">\(0\)</span> 层）—— 用 “大候选列表”
保证召回率
<ul>
<li>当层数≤元素 <span class="math inline">\(q\)</span> 的最大层数 <span class="math inline">\(l\)</span> 时，扩大 <span class="math inline">\(W\)</span> 的规模，找更多候选邻居。</li>
<li>原因：下层需要更精准的近邻，避免后续邻居选择遗漏关键节点，保证构建质量。</li>
</ul></li>
</ul></li>
<li>步骤 3：选择邻居并建立 “双向链接”
<ul>
<li>对每个下层（<span class="math inline">\(0\)</span> 到 <span class="math inline">\(l\)</span> 层），从步骤 2 找到的候选邻居中选 <span class="math inline">\(M\)</span> 个（<span class="math inline">\(M\)</span> 是每层最大连接数），用两种方式选择：
<ul>
<li>若用 “简单规则”（Algorithm 3）：<strong>直接选 <span class="math inline">\(W\)</span> 中离 <span class="math inline">\(q\)</span> 最近的 <span class="math inline">\(M\)</span> 个元素</strong>。</li>
<li>若用 “启发式规则”（Algorithm 4）：遍历 <span class="math inline">\(W\)</span> 中的候选者，依次判断
“<strong>候选者是否比已选邻居更接近 <span class="math inline">\(q\)</span></strong>”，满足则加入邻居列表，直到选满
<span class="math inline">\(M\)</span> 个。</li>
</ul></li>
<li>建立链接：对选中的每个邻居，在当前层建立 <span class="math inline">\(q\)</span> 与邻居的双向链接。</li>
</ul></li>
<li>步骤 4：处理 “连接数超限”—— 缩减链接
<ul>
<li>若某个元素（包括 <span class="math inline">\(q\)</span>
和它的邻居）在当前层的连接数超过 “最大限制 <span class="math inline">\(M\)</span>”，则用邻居选择规则缩减链接，只保留
<span class="math inline">\(M\)</span> 个 “最优邻居”。</li>
</ul></li>
<li>步骤 5：更新 “入口点”（若需要）
<ul>
<li>若新元素 <span class="math inline">\(q\)</span> 的最大层数 <span class="math inline">\(l\)</span> 超过当前顶层 <span class="math inline">\(L\)</span>，则更新入口点为 <span class="math inline">\(q\)</span>，并将图的顶层数更新为 <span class="math inline">\(l\)</span>。</li>
</ul></li>
</ol>
<h3 id="图搜索查询近邻如何高效找到某个元素的-k-近邻">图搜索（查询近邻）：如何高效找到某个元素的
K 近邻？</h3>
<p>搜索流程的目标是 “给定查询元素 <span class="math inline">\(q\)</span>，返回离 <span class="math inline">\(q\)</span> 最近的 <span class="math inline">\(K\)</span> 个元素”，对应论文的 Algorithm 5，逻辑与
“构建阶段的下层搜索” 类似，但更简洁：</p>
<ol type="1">
<li>步骤 1：从顶层入口点开始 “向下粗定位”
<ul>
<li>从入口点 <span class="math inline">\(ep\)</span>
开始遍历：对每层进行遍历，然后将 <span class="math inline">\(W\)</span>
中最近的元素作为下一层的 <span class="math inline">\(ep\)</span>，直到进入底层（<span class="math inline">\(0\)</span> 层）。</li>
<li>作用：快速缩小搜索范围，避免在底层遍历过多节点。</li>
</ul></li>
<li>步骤 2：在底层 “精细搜索” 候选近邻
<ul>
<li>进入底层后，扩大 <span class="math inline">\(W\)</span>
的规模，找更多候选近邻。</li>
<li>遍历逻辑与构建阶段一致</li>
</ul></li>
<li>步骤 3：返回 <span class="math inline">\(K\)</span> 个最优近邻
<ul>
<li>从底层的 <span class="math inline">\(W\)</span> 列表中，筛选出离
<span class="math inline">\(q\)</span> 最近的 <span class="math inline">\(K\)</span> 个元素，作为最终的 “近似最近邻”
结果。</li>
</ul></li>
</ol>
<h2 id="关键参数">关键参数</h2>
<ul>
<li>控制元素的层数分配，影响层间链接重叠度</li>
<li>每层的最大连接数 <span class="math inline">\(M\)</span></li>
<li>底层的最大连接数（底层数据多，需更多链接）<span class="math inline">\(M_{max}\)</span></li>
<li>构建阶段的候选列表规模 <span class="math inline">\(efConstruction\)</span></li>
<li>搜索阶段的候选列表规模 <span class="math inline">\(efSearch\)</span></li>
</ul>
<h2 id="优缺点总结">优缺点总结</h2>
<ul>
<li>优点：
<ul>
<li>效率高：搜索复杂度是 “对数级”（<span class="math inline">\(O(\log
N)\)</span>），比 NSW 的 “多项式对数级” 快，在 10 亿级数据上仍能实现
“毫秒级查询”（比如 200M SIFT 数据上，查询时间比 Faiss（PQ
算法）快数倍）。</li>
<li>鲁棒性强：在低维、高维、聚类数据上均表现最优 —— 传统算法（如
LSH、k-d 树）在高维数据中会 “维度灾难”，NSW 在低维数据中性能差，而 HNSW
通过分层和启发式邻居选择，能适应所有场景。</li>
<li>易扩展：支持 “增量插入”（随时加新数据，无需重建图），且可借鉴
“跳表的分布式技术” 实现分布式搜索。</li>
</ul></li>
<li>缺点：
<ul>
<li>内存开销大：HNSW
需要存储多层图结构和大量链接，内存消耗较高，尤其在大规模数据集上。</li>
<li>构建时间较长：相比其他近邻搜索算法，HNSW
的图构建过程较复杂，难以并行化，时间开销较大。</li>
<li>参数调优复杂：HNSW 有多个关键参数（如 <span class="math inline">\(M\)</span>、<span class="math inline">\(M_{max}\)</span>、<span class="math inline">\(efConstruction\)</span>、<span class="math inline">\(efSearch\)</span>
等），需要根据具体数据集进行调优，增加了使用难度。</li>
</ul></li>
</ul>
<h1 id="分享报告">分享报告</h1>


	<div class="row">
    <embed src="LLM_时代的向量数据库分享报告.pdf" width="100%" height="550" type="application/pdf">
	</div>



<h1 id="参考资料">参考资料</h1>
<ol type="1">
<li>MALKOV Y A, YASHUNIN D A. Efficient and Robust Approximate Nearest
Neighbor Search Using Hierarchical Navigable Small World Graphs[J]. IEEE
Transactions on Pat- tern Analysis and Machine Intelligence, 2018,
42(4): 824-836.</li>
</ol>


	<div class="row">
    <embed src="Efficient_and_robust_approximate_nearest_neighbor_search_using_Hierarchical_Navigable_Small_World_graphs.pdf" width="100%" height="550" type="application/pdf">
	</div>




                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Misc/" class="category-chain-item">Misc</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/HNSW/" class="print-no-link">#HNSW</a>
      
        <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="print-no-link">#数据库</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>分层可导航小世界图HNSW简介</div>
      <div>https://youyeyejie.github.io/_posts/分层可导航小世界图HNSW简介/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>youyeyejie</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年11月8日</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>更新于</div>
          <div>2025年11月20日</div>
        </div>
      
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/_posts/%E7%B3%BB%E7%BB%9F%E5%AE%89%E5%85%A8/" title="系统安全">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">系统安全</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/_posts/%E7%8E%B0%E4%BB%A3%E5%AF%86%E7%A0%81%E5%AD%A6/" title="现代密码学">
                        <span class="hidden-mobile">现代密码学</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments">
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"youyeyejie/youyeyejie.github.io","repo-id":"R_kgDOO-Uo1g","category":"General","category-id":"DIC_kwDOO-Uo1s4Crz5J","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN"};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>







  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
  
  
</div>
<div class="footer-inner">
    <div class="powered-by">
        <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
        <i class="iconfont icon-love"></i>
        <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a>
        <i class="iconfont icon-love"></i>
        <a href="https://cloud.umami.is/share/1fs3cnD9TAP8JzML" target="_blank" rel="nofollow noopener"><span>Umami</span></a>
    </div>
    <div class="hitokoto">
        <i class="fas fa-quote-left"></i>
        <a target="_blank" rel="noopener" href="https://developer.hitokoto.cn/" id="hitokoto_text"><span id="hitokoto">且以群词 注解我这座荒山</span></a>
        <script src="/js/Hitokoto.js" defer></script>
    </div>
    <div class="data">
        <span class="total-word-container">
            <i class="fas fa-chart-bar"></i>
            <span id="g-total-word-id"></span>
            字汇长河
        </span>
        &nbsp;
        <span id="total-posts-container">
            <i class="fas fa-file-alt"></i>
            <span id="g-total-posts-id"></span>
            文舟靠岸
        </span>
        &nbsp;
        <span id="busuanzi_container_site_pv">
            <i class="fas fa-eye"></i>
            <span id="busuanzi_value_site_pv">1314</span>
            目光所及
        </span>
        &nbsp;
        <span id="busuanzi_container_site_uv">
            <i class="fas fa-user-friends"></i>
            <span id="busuanzi_value_site_uv">520</span>
            访客驻足
        </span>
    </div>
    <div class="duration">
        <i class="fas fa-calendar"></i>
        <span id="duration-container">人生缓缓&nbsp;自有答案</span>
        <script src="/js/Duration.js"></script>
    </div>
</div>

<link href="/css/Footer.css" type="text/css" rel="stylesheet"/>
<script>
    document.querySelectorAll("[id^='busuanzi_value_']").forEach(element => {
        element.id = element.id.replace("busuanzi_value_", "vercount_value_");
    });
</script>
<script defer src="https://events.vercount.one/js"></script>
<!-- <script src="https://npm.elemecdn.com/penndu@1.0.0/bsz.js" defer></script> -->
<!-- <script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script> -->
<!-- <script async src="https://busuanzi.icodeq.com/busuanzi.pure.mini.js"></script> -->
<!-- <script async src="https://busuanzi.sukap.cn/busuanzi.pure.mini.js"></script> -->
  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    
      <script  src="/js/img-lazyload.js" ></script>
    
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/busuanzi.pure.mini.js" ></script>




  
<script src="/js/Crypto.js"></script>
<script src="/js/LinkCard.js"></script>
<script src="/js/RandomBanner.js"></script>
<script src="/js/Background.js"></script>
<script src="/js/ScrollAnimation.js"></script>
<script src="/js/Sidebar.js"></script>
<script src="/js/TabDisplay.js"></script>
<script src="/js/Tooltip.js"></script>
<script src="/js/Umami.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  <script type="text/javascript">
  document.getElementById("g-total-word-id").innerHTML = "622k";
  document.getElementById('g-total-posts-id').textContent ="62";
</script>

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<!-- hexo injector body_end start -->
<script src="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.js"></script>

  <script>
  const CODE_CONFIG = {
    beautify: true,
    highlightCopy: true,
    highlightLang: true,
    highlightHeightLimit: 360,
    isHighlightShrink: false,
    copy: {
      success: 'Copy Success',
      error: 'Copy Error',
      noSupport: 'Browser Not Support',
    }
  };
  console.log(
    `%c hexo-shiki-plugin %c v1.0.27 %c https://github.com/nova1751/hexo-shiki-plugin`,
    "color: #fff; background: #5f5f5f",
    "color: #fff; background: #80c8f8",
    ""
  );
  </script>
  <!-- hexo injector body_end end --></body>
</html>
